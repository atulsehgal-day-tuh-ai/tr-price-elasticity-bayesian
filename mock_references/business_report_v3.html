<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sparkling Ice ‚Äî Club Channel Pricing & Promotion Strategy Brief</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

        :root {
            --bg: #0f1117;
            --surface: #1a1d27;
            --surface-raised: #232733;
            --surface-hover: #2a2e3b;
            --border: #2e3240;
            --border-light: #3a3f50;
            --text: #e8e9ed;
            --text-secondary: #9a9caa;
            --text-muted: #6b6e7d;
            --green: #34d399; --green-dim: rgba(52,211,153,0.12);
            --red: #f87171; --red-dim: rgba(248,113,113,0.12);
            --amber: #fbbf24; --amber-dim: rgba(251,191,36,0.12);
            --blue: #60a5fa; --blue-dim: rgba(96,165,250,0.12);
            --purple: #a78bfa; --purple-dim: rgba(167,139,250,0.12);
            --sans: 'DM Sans', -apple-system, sans-serif;
            --mono: 'JetBrains Mono', monospace;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:var(--sans); background:var(--bg); color:var(--text); line-height:1.6; font-size:15px; -webkit-font-smoothing:antialiased; }
        .page { max-width:1100px; margin:0 auto; padding:48px 36px; }

        /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
        .hero { padding:40px 0 36px; border-bottom:1px solid var(--border); margin-bottom:36px; }
        .hero-eyebrow { font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:2px; color:var(--blue); margin-bottom:12px; }
        .hero h1 { font-size:30px; font-weight:700; letter-spacing:-0.5px; line-height:1.2; margin-bottom:8px; }
        .hero .tagline { font-size:15px; color:var(--text-secondary); font-weight:300; max-width:640px; }
        .hero-meta { margin-top:20px; display:flex; gap:24px; flex-wrap:wrap; }
        .hero-meta-item { font-size:12px; color:var(--text-muted); }
        .hero-meta-item span { color:var(--text-secondary); font-family:var(--mono); font-size:11px; }

        /* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
        .cards-section { margin-bottom:44px; }
        .cards-row-label {
            font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:1px;
            color:var(--text-muted); margin-bottom:6px; margin-top:16px; padding-left:2px;
            display:flex; align-items:center; gap:8px;
        }
        .cards-row-label:first-child { margin-top:0; }
        .row-tag { font-size:9px; padding:2px 6px; border-radius:3px; font-family:var(--mono); letter-spacing:0.3px; }
        .row-tag-overall { background:var(--blue-dim); color:var(--blue); }
        .row-tag-retailer { background:var(--surface-raised); color:var(--text-muted); }
        .headline-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:4px; }
        .hcard {
            background:var(--surface); border:1px solid var(--border); border-radius:10px;
            padding:16px 18px; position:relative; overflow:hidden;
        }
        .hcard-overall { border-color:var(--border-light); border-width:1.5px; }
        .hcard::before { content:''; position:absolute; top:0;left:0;right:0; height:2px; }
        .hcard.hc-red::before { background:var(--red); }
        .hcard.hc-green::before { background:var(--green); }
        .hcard.hc-amber::before { background:var(--amber); }
        .hcard .hc-label { font-size:10px; font-weight:500; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:4px; display:flex; align-items:center; gap:6px; }
        .hcard .hc-val { font-size:26px; font-weight:700; letter-spacing:-0.5px; line-height:1.1; margin-bottom:3px; }
        .hcard-overall .hc-val { font-size:32px; }
        .hcard .hc-sub { font-size:11px; color:var(--text-secondary); line-height:1.4; }
        .hc-red .hc-val { color:var(--red); }
        .hc-green .hc-val { color:var(--green); }
        .hc-amber .hc-val { color:var(--amber); }

        /* ‚îÄ‚îÄ Pill ‚îÄ‚îÄ */
        .pill { display:inline-block; font-size:9px; font-weight:600; padding:2px 6px; border-radius:8px; font-family:var(--mono); letter-spacing:0.3px; vertical-align:middle; }
        .pill-high { background:var(--green-dim); color:var(--green); }
        .pill-med { background:var(--amber-dim); color:var(--amber); }
        .pill-low { background:var(--red-dim); color:var(--red); }
        .pill-na { background:var(--surface-raised); color:var(--text-muted); }

        /* ‚îÄ‚îÄ Section ‚îÄ‚îÄ */
        .section { margin-bottom:52px; }
        .section-label { font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:1.5px; color:var(--blue); margin-bottom:8px; }
        .section-title { font-size:20px; font-weight:600; margin-bottom:6px; }
        .section-desc { font-size:14px; color:var(--text-secondary); margin-bottom:24px; max-width:720px; line-height:1.7; }
        .divider { height:1px; background:var(--border); margin:48px 0; }

        /* ‚îÄ‚îÄ Tables ‚îÄ‚îÄ */
        table { width:100%; border-collapse:collapse; font-size:13px; margin:16px 0; }
        thead th { text-align:left; font-size:10px; font-weight:600; text-transform:uppercase; letter-spacing:0.5px; color:var(--text-muted); padding:9px 12px; border-bottom:1px solid var(--border-light); white-space:nowrap; }
        tbody td { padding:10px 12px; border-bottom:1px solid var(--border); font-family:var(--mono); font-size:12px; color:var(--text-secondary); }
        tbody tr:hover { background:var(--surface-hover); }
        .td-label { font-family:var(--sans); font-weight:500; color:var(--text); font-size:13px; }
        .td-green { color:var(--green); font-weight:600; }
        .td-red { color:var(--red); font-weight:600; }
        .td-amber { color:var(--amber); }
        .td-muted { color:var(--text-muted); }
        .overall-row td { font-weight:600; border-top:2px solid var(--border-light); background:var(--surface-raised); }

        /* ‚îÄ‚îÄ Bar Chart ‚îÄ‚îÄ */
        .bar-section { margin:20px 0; }
        .bar-section-title { font-size:11px; color:var(--text-muted); margin-bottom:10px; font-weight:500; text-transform:uppercase; letter-spacing:0.5px; }
        .bar-row { display:grid; grid-template-columns:90px 1fr 100px; align-items:center; gap:10px; margin-bottom:8px; }
        .bar-label { font-size:13px; font-weight:500; text-align:right; }
        .bar-track { height:26px; background:var(--surface-raised); border-radius:5px; position:relative; overflow:hidden; }
        .bar-fill { height:100%; border-radius:5px; display:flex; align-items:center; padding-left:10px; font-size:11px; font-family:var(--mono); font-weight:600; color:var(--bg); }
        .bar-note { font-size:11px; font-family:var(--mono); color:var(--text-muted); }

        /* ‚îÄ‚îÄ Alert ‚îÄ‚îÄ */
        .alert { border-radius:10px; padding:18px 22px; margin:20px 0; display:flex; gap:12px; align-items:flex-start; }
        .alert-red { background:var(--red-dim); border:1px solid rgba(248,113,113,0.2); }
        .alert-amber { background:var(--amber-dim); border:1px solid rgba(251,191,36,0.2); }
        .alert-icon { font-size:18px; flex-shrink:0; margin-top:1px; }
        .alert-text { font-size:13px; color:var(--text-secondary); line-height:1.7; }
        .alert-text strong { color:var(--text); }

        /* ‚îÄ‚îÄ Season Cards ‚îÄ‚îÄ */
        .season-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin:16px 0; }
        .season-cell { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:16px; text-align:center; }
        .season-cell .s-name { font-size:11px; font-weight:600; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:6px; }
        .season-cell .s-val { font-size:22px; font-weight:700; font-family:var(--mono); margin-bottom:3px; }
        .season-cell .s-sub { font-size:10px; color:var(--text-muted); }
        .s-winter .s-val { color:#94a3b8; }
        .s-spring { border-color:rgba(52,211,153,0.25); } .s-spring .s-val { color:var(--green); }
        .s-summer { border-color:rgba(251,191,36,0.3); background:rgba(251,191,36,0.03); } .s-summer .s-val { color:var(--amber); }
        .s-fall { border-color:rgba(167,139,250,0.2); } .s-fall .s-val { color:var(--purple); }

        /* ‚îÄ‚îÄ Simulator ‚îÄ‚îÄ */
        .simulator { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:28px; margin:24px 0; }
        .simulator h4 { font-size:15px; font-weight:600; margin-bottom:20px; }
        .sim-controls { display:grid; grid-template-columns:1fr 1fr 1fr; gap:20px; margin-bottom:20px; }
        .sim-control label { display:block; font-size:10px; font-weight:500; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:6px; }
        .sim-control input[type="range"] { width:100%; accent-color:var(--blue); margin-bottom:4px; }
        .sim-control .sim-val { font-family:var(--mono); font-size:14px; font-weight:600; }
        .sim-output { background:var(--surface-raised); border-radius:8px; padding:20px; }
        .sim-output table { margin:0; }
        .sim-formula { margin-top:10px; font-size:11px; font-family:var(--mono); color:var(--text-muted); }

        /* ‚îÄ‚îÄ Evidence Box ‚îÄ‚îÄ */
        .evidence {
            margin-top:8px; font-size:11px; font-family:var(--mono); color:var(--text-muted);
            background:var(--surface-raised); padding:8px 12px; border-radius:5px; line-height:1.7;
        }

        /* ‚îÄ‚îÄ Historical Match ‚îÄ‚îÄ */
        .match-good { color:var(--green); }
        .match-ok { color:var(--amber); }
        .match-poor { color:var(--red); }

        /* ‚îÄ‚îÄ Expandable Findings ‚îÄ‚îÄ */
        .finding-row { cursor:pointer; transition:background 0.15s; }
        .finding-row:hover { background:var(--surface-hover); }
        .finding-row td:first-child { position:relative; padding-left:28px; }
        .finding-toggle {
            position:absolute; left:8px; top:50%; transform:translateY(-50%);
            font-size:10px; color:var(--text-muted); transition:transform 0.2s;
            display:inline-block; width:12px; text-align:center;
        }
        .finding-row.open .finding-toggle { transform:translateY(-50%) rotate(90deg); }
        .finding-rationale {
            display:none; background:var(--surface-raised); border-bottom:1px solid var(--border);
        }
        .finding-rationale.open { display:table-row; }
        .finding-rationale td {
            padding:14px 18px 14px 28px;
            font-size:12px; line-height:1.75; color:var(--text-secondary);
            font-family:var(--sans); border-bottom:1px solid var(--border);
        }
        .finding-rationale .r-num {
            font-family:var(--mono); font-weight:600; color:var(--text);
            background:rgba(255,255,255,0.06); padding:1px 5px; border-radius:3px;
            font-size:11px;
        }
        .finding-rationale .r-label {
            font-size:10px; font-weight:600; text-transform:uppercase;
            letter-spacing:0.5px; color:var(--text-muted); display:block; margin-bottom:6px;
        }
        .finding-rationale .r-retailer {
            display:inline-block; font-family:var(--mono); font-size:11px;
            padding:2px 8px; border-radius:3px; margin:2px 4px 2px 0;
            background:rgba(255,255,255,0.04); border:1px solid var(--border);
        }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .footer { margin-top:64px; padding-top:20px; border-top:1px solid var(--border); font-size:11px; color:var(--text-muted); font-family:var(--mono); display:flex; justify-content:space-between; flex-wrap:wrap; gap:8px; }

        @media (max-width:768px) {
            .headline-grid { grid-template-columns:1fr; }
            .sim-controls { grid-template-columns:1fr; }
            .season-grid { grid-template-columns:repeat(2,1fr); }
            .bar-row { grid-template-columns:70px 1fr 80px; }
        }
        @media print {
            body { background:#fff; color:#1a1a1a; }
            .hcard,.simulator,.season-cell,.alert { background:#f5f5f5; border-color:#ddd; break-inside:avoid; }
            .hc-red .hc-val,.td-red { color:#b91c1c; }
            .hc-green .hc-val,.td-green { color:#166534; }
            .hc-amber .hc-val,.td-amber { color:#92400e; }
        }
    </style>
</head>
<body>
<div class="page">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- HERO                                                      -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="hero">
        <div class="hero-eyebrow">Pricing & Promotion Intelligence</div>
        <h1>Sparkling Ice ‚Äî Club Channel<br>Strategy Brief</h1>
        <div class="tagline">
            Data-driven pricing and promotion findings for BJ's, Costco, and Sam's Club ‚Äî 
            based on 479 weeks of sales data analyzed through a Bayesian demand model.
        </div>
        <div class="hero-meta">
            <div class="hero-meta-item">Period <span>Jan 2023 ‚Äì Jan 2026</span></div>
            <div class="hero-meta-item">Retailers <span>BJ's ¬∑ Costco ¬∑ Sam's Club</span></div>
            <div class="hero-meta-item">Confidence <span>95% Credible Intervals</span></div>
            <div class="hero-meta-item">Generated <span>Feb 7, 2026</span></div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- HEADLINE CARDS: 4 ROWS                                    -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="cards-section">

        <!-- Overall -->
        <div class="cards-row-label">Overall (All Retailers) <span class="row-tag row-tag-overall">GLOBAL ESTIMATE</span></div>
        <div class="headline-grid">
            <div class="hcard hcard-overall hc-red">
                <div class="hc-label">Price Sensitivity <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">‚àí1.84</div>
                <div class="hc-sub">1% price increase ‚Üí ~1.8% volume loss. Demand is elastic ‚Äî price increases reduce revenue.</div>
            </div>
            <div class="hcard hcard-overall hc-green">
                <div class="hc-label">Promotional Power <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">2.3√ó</div>
                <div class="hc-sub">Promotions drive 2.3√ó more volume response than base price changes per dollar invested.</div>
            </div>
            <div class="hcard hcard-overall hc-amber">
                <div class="hc-label">Underlying Trend <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">‚àí4.6%</div>
                <div class="hc-sub">Annual organic demand decline after controlling for price, promos, and seasonality.</div>
            </div>
        </div>

        <!-- BJ's -->
        <div class="cards-row-label">BJ's <span class="row-tag row-tag-retailer">CIRCANA</span></div>
        <div class="headline-grid">
            <div class="hcard hc-red">
                <div class="hc-label">Price Sensitivity <span class="pill pill-med">MODERATE</span></div>
                <div class="hc-val">‚àí1.65</div>
                <div class="hc-sub">Least sensitive of three retailers. Best candidate for any price adjustments.</div>
            </div>
            <div class="hcard hc-green">
                <div class="hc-label">Promotional Power <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">2.7√ó</div>
                <div class="hc-sub">Highest promo-to-base ratio. Strongest candidate for promotional investment.</div>
            </div>
            <div class="hcard hc-amber">
                <div class="hc-label">Underlying Trend <span class="pill pill-na">SHARED</span></div>
                <div class="hc-val">‚àí4.6%</div>
                <div class="hc-sub">Shared estimate across retailers (model does not separate trend by retailer).</div>
            </div>
        </div>

        <!-- Costco -->
        <div class="cards-row-label">Costco <span class="row-tag row-tag-retailer">CRX</span></div>
        <div class="headline-grid">
            <div class="hcard hc-red">
                <div class="hc-label">Price Sensitivity <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">‚àí2.10</div>
                <div class="hc-sub">Most price-sensitive. A 1% increase here loses ~27% more volume than at BJ's.</div>
            </div>
            <div class="hcard hc-green">
                <div class="hc-label">Promotional Power <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">1.8√ó</div>
                <div class="hc-sub">Lowest promo multiplier ‚Äî consistent with Costco's everyday-low-price positioning.</div>
            </div>
            <div class="hcard hc-amber">
                <div class="hc-label">Underlying Trend <span class="pill pill-na">SHARED</span></div>
                <div class="hc-val">‚àí4.6%</div>
                <div class="hc-sub">Shared estimate across retailers.</div>
            </div>
        </div>

        <!-- Sam's Club -->
        <div class="cards-row-label">Sam's Club <span class="row-tag row-tag-retailer">CIRCANA</span></div>
        <div class="headline-grid">
            <div class="hcard hc-red">
                <div class="hc-label">Price Sensitivity <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">‚àí1.78</div>
                <div class="hc-sub">Mid-range sensitivity, close to the overall average.</div>
            </div>
            <div class="hcard hc-green">
                <div class="hc-label">Promotional Power <span class="pill pill-high">HIGH CONFIDENCE</span></div>
                <div class="hc-val">2.5√ó</div>
                <div class="hc-sub">Strong promo response, similar profile to BJ's.</div>
            </div>
            <div class="hcard hc-amber">
                <div class="hc-label">Underlying Trend <span class="pill pill-na">SHARED</span></div>
                <div class="hc-val">‚àí4.6%</div>
                <div class="hc-sub">Shared estimate across retailers.</div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- BASE PRICE SCENARIOS                                      -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Strategic Pricing</div>
        <div class="section-title">Base Price Impact ‚Äî Overall</div>
        <div class="section-desc">
            What happens to volume and revenue if base price changes permanently? 
            Confidence indicates the probability that the revenue impact direction is correct.
        </div>

        <table>
            <thead>
                <tr><th>Price Change</th><th>Volume Impact</th><th>Revenue Impact</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                <tr><td class="td-label">‚àí5%</td><td class="td-green">+9.1%</td><td class="td-green">+3.7%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">‚àí3%</td><td class="td-green">+5.5%</td><td class="td-green">+2.3%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">‚àí1%</td><td class="td-green">+1.8%</td><td class="td-green">+0.8%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">+1%</td><td class="td-red">‚àí1.8%</td><td class="td-red">‚àí0.8%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">+3%</td><td class="td-red">‚àí5.5%</td><td class="td-red">‚àí2.6%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">+5%</td><td class="td-red">‚àí9.1%</td><td class="td-red">‚àí4.6%</td><td><span class="pill pill-high">HIGH</span></td></tr>
            </tbody>
        </table>

        <div class="section-title" style="font-size:17px; margin-top:32px;">Base Price Impact ‚Äî By Retailer (1% Price Increase)</div>
        <table>
            <thead>
                <tr><th>Retailer</th><th>Base Elasticity</th><th>Volume Impact</th><th>Revenue Impact</th><th>Confidence</th><th>Relative Sensitivity</th></tr>
            </thead>
            <tbody>
                <tr class="overall-row">
                    <td class="td-label">Overall</td><td>‚àí1.8</td><td class="td-red">‚àí1.8%</td><td class="td-red">‚àí0.8%</td>
                    <td><span class="pill pill-high">HIGH</span></td><td style="font-family:var(--sans);font-size:12px;">‚Äî</td>
                </tr>
                <tr>
                    <td class="td-label">BJ's</td><td>‚àí1.65</td><td class="td-red">‚àí1.7%</td><td class="td-red">‚àí0.7%</td>
                    <td><span class="pill pill-med">MODERATE</span></td><td style="font-family:var(--sans);font-size:12px;color:var(--green);">Least sensitive</td>
                </tr>
                <tr>
                    <td class="td-label">Costco</td><td>‚àí2.10</td><td class="td-red">‚àí2.1%</td><td class="td-red">‚àí1.1%</td>
                    <td><span class="pill pill-high">HIGH</span></td><td style="font-family:var(--sans);font-size:12px;color:var(--red);">Most sensitive</td>
                </tr>
                <tr>
                    <td class="td-label">Sam's Club</td><td>‚àí1.78</td><td class="td-red">‚àí1.8%</td><td class="td-red">‚àí0.8%</td>
                    <td><span class="pill pill-high">HIGH</span></td><td style="font-family:var(--sans);font-size:12px;">Mid-range</td>
                </tr>
            </tbody>
        </table>

        <!-- Bar visual -->
        <div class="bar-section">
            <div class="bar-section-title">Volume Impact of 1% Base Price Increase ‚Äî By Retailer</div>
            <div class="bar-row">
                <div class="bar-label">BJ's</div>
                <div class="bar-track"><div class="bar-fill" style="width:55%;background:var(--blue);">‚àí1.65%</div></div>
                <div class="bar-note">Least sensitive</div>
            </div>
            <div class="bar-row">
                <div class="bar-label">Sam's Club</div>
                <div class="bar-track"><div class="bar-fill" style="width:65%;background:var(--purple);">‚àí1.78%</div></div>
                <div class="bar-note"></div>
            </div>
            <div class="bar-row">
                <div class="bar-label">Costco</div>
                <div class="bar-track"><div class="bar-fill" style="width:80%;background:var(--red);">‚àí2.10%</div></div>
                <div class="bar-note">Most sensitive</div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- PROMOTIONAL SCENARIOS                                     -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Tactical Promotions</div>
        <div class="section-title">Promotional Discount Impact ‚Äî Overall</div>
        <div class="section-desc">
            Revenue and volume impact of different promotional discount depths. 
            "Revenue per 1pp" shows efficiency ‚Äî revenue gained per percentage-point of discount.
        </div>

        <table>
            <thead>
                <tr><th>Discount Depth</th><th>Volume Impact</th><th>Revenue Impact</th><th>Revenue per 1pp</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                <tr><td class="td-label">5% off</td><td class="td-green">+21.2%</td><td class="td-green">+15.2%</td><td class="td-green">3.0%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">10% off</td><td class="td-green">+42.5%</td><td class="td-green">+28.2%</td><td class="td-green">2.8%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">15% off</td><td class="td-green">+63.7%</td><td class="td-green">+39.2%</td><td class="td-amber">2.6%</td><td><span class="pill pill-high">HIGH</span></td></tr>
                <tr><td class="td-label">20% off</td><td class="td-green">+85.0%</td><td class="td-green">+48.0%</td><td class="td-amber">2.4%</td><td><span class="pill pill-high">HIGH</span></td></tr>
            </tbody>
        </table>

        <div class="section-title" style="font-size:17px; margin-top:32px;">Promotional Response ‚Äî By Retailer (10% Discount)</div>
        <table>
            <thead>
                <tr><th>Retailer</th><th>Promo Elasticity</th><th>Volume Impact</th><th>Revenue Impact</th><th>Promo/Base Ratio</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                <tr class="overall-row">
                    <td class="td-label">Overall</td><td>‚àí4.2</td><td class="td-green">+53%</td><td class="td-green">+37%</td>
                    <td>2.3√ó</td><td><span class="pill pill-high">HIGH</span></td>
                </tr>
                <tr>
                    <td class="td-label">BJ's</td><td>‚àí4.5</td><td class="td-green">+56%</td><td class="td-green">+40%</td>
                    <td style="color:var(--green);">2.7√ó</td><td><span class="pill pill-high">HIGH</span></td>
                </tr>
                <tr>
                    <td class="td-label">Costco</td><td>‚àí3.9</td><td class="td-green">+47%</td><td class="td-green">+32%</td>
                    <td>1.8√ó</td><td><span class="pill pill-high">HIGH</span></td>
                </tr>
                <tr>
                    <td class="td-label">Sam's Club</td><td>‚àí4.4</td><td class="td-green">+55%</td><td class="td-green">+40%</td>
                    <td style="color:var(--green);">2.5√ó</td><td><span class="pill pill-high">HIGH</span></td>
                </tr>
            </tbody>
        </table>

        <!-- Bar visual -->
        <div class="bar-section">
            <div class="bar-section-title">Volume Impact of 10% Discount ‚Äî By Retailer</div>
            <div class="bar-row">
                <div class="bar-label">BJ's</div>
                <div class="bar-track"><div class="bar-fill" style="width:90%;background:var(--green);">+56%</div></div>
                <div class="bar-note">Most responsive</div>
            </div>
            <div class="bar-row">
                <div class="bar-label">Sam's Club</div>
                <div class="bar-track"><div class="bar-fill" style="width:88%;background:var(--green);">+55%</div></div>
                <div class="bar-note"></div>
            </div>
            <div class="bar-row">
                <div class="bar-label">Costco</div>
                <div class="bar-track"><div class="bar-fill" style="width:75%;background:var(--blue);">+47%</div></div>
                <div class="bar-note">Least responsive</div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- CROSS-PRICE                                               -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Competitive Dynamics</div>
        <div class="section-title">Private Label Cross-Price Impact</div>

        <div class="alert alert-amber">
            <div class="alert-icon">‚ö†Ô∏è</div>
            <div class="alert-text">
                Cross-price elasticity is <strong>‚àí0.1</strong> (95% range includes zero: ‚àí0.2 to +0.0). 
                This effect is <strong>not statistically distinguishable from no effect</strong>. 
                Private Label pricing does not meaningfully impact Sparkling Ice volume. 
                Costco has no Private Label data and is excluded.
            </div>
        </div>

        <table>
            <thead>
                <tr><th>Retailer</th><th>Cross-Price Elasticity</th><th>1% PL Price Increase ‚Üí SI Volume Impact</th><th>Confidence</th></tr>
            </thead>
            <tbody>
                <tr class="overall-row"><td class="td-label">Overall</td><td>‚àí0.1</td><td class="td-muted">‚àí0.1% (negligible)</td><td><span class="pill pill-low">LOW</span></td></tr>
                <tr><td class="td-label">BJ's</td><td>‚àí0.1 (shared)</td><td class="td-muted">‚àí0.1%</td><td><span class="pill pill-low">LOW</span></td></tr>
                <tr><td class="td-label">Costco</td><td class="td-muted">‚Äî masked (no PL data)</td><td class="td-muted">N/A</td><td><span class="pill pill-na">N/A</span></td></tr>
                <tr><td class="td-label">Sam's Club</td><td>‚àí0.1 (shared)</td><td class="td-muted">‚àí0.1%</td><td><span class="pill pill-low">LOW</span></td></tr>
            </tbody>
        </table>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- SEASONALITY                                               -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Timing</div>
        <div class="section-title">Seasonal Demand Pattern</div>
        <div class="section-desc">
            Volume impact relative to Winter baseline (shared across all retailers). 
            Promotional spend concentrated in peak season generates higher absolute returns.
        </div>

        <div class="season-grid">
            <div class="season-cell s-winter">
                <div class="s-name">Winter</div>
                <div class="s-val">Baseline</div>
                <div class="s-sub">Dec ‚Äì Feb</div>
            </div>
            <div class="season-cell s-spring">
                <div class="s-name">Spring</div>
                <div class="s-val">+9.4%</div>
                <div class="s-sub">Mar ‚Äì May ¬∑ <span class="pill pill-high">HIGH</span></div>
            </div>
            <div class="season-cell s-summer">
                <div class="s-name">Summer</div>
                <div class="s-val">+21.8%</div>
                <div class="s-sub">Jun ‚Äì Aug ¬∑ Peak ¬∑ <span class="pill pill-high">HIGH</span></div>
            </div>
            <div class="season-cell s-fall">
                <div class="s-name">Fall</div>
                <div class="s-val">+2.2%</div>
                <div class="s-sub">Sep ‚Äì Nov ¬∑ <span class="pill pill-low">LOW</span></div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- DEMAND TREND                                              -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Trend Alert</div>
        <div class="section-title">Underlying Demand Decline</div>

        <div class="alert alert-red">
            <div class="alert-icon">üö®</div>
            <div class="alert-text">
                Organic demand is declining <strong>‚àí4.6% annually</strong> (95% range: ‚àí6.4% to ‚àí2.8%), 
                after controlling for price, promotions, and seasonality. This is a shared estimate 
                across all retailers. Over 3 years, the cumulative baseline erosion is approximately 
                <strong>‚àí13% to ‚àí14%</strong>.
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- HISTORICAL EVIDENCE                                       -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Historical Evidence</div>
        <div class="section-title">What Happened When Prices Actually Changed?</div>
        <div class="section-desc">
            Weeks where base price moved by more than 1% compared to the prior week. 
            Observed volume impact (4-week average after vs before) compared against what 
            the model would have predicted. Close alignment = model validation.
        </div>

        <table>
            <thead>
                <tr>
                    <th>Retailer</th>
                    <th>Date</th>
                    <th>Price Move</th>
                    <th>Observed Volume Impact</th>
                    <th>Model Predicted Impact</th>
                    <th>Match</th>
                </tr>
            </thead>
            <tbody>
                <!-- These rows are PLACEHOLDERS ‚Äî production code will compute from prepared_data.csv -->
                <tr>
                    <td class="td-label">BJ's</td>
                    <td>Jun 15, 2024</td>
                    <td class="td-red">+3.2%</td>
                    <td class="td-red">‚àí5.8%</td>
                    <td>‚àí5.9%</td>
                    <td><span class="match-good">‚óè Close match</span></td>
                </tr>
                <tr>
                    <td class="td-label">BJ's</td>
                    <td>Jan 8, 2025</td>
                    <td class="td-red">+2.1%</td>
                    <td class="td-red">‚àí4.2%</td>
                    <td>‚àí3.9%</td>
                    <td><span class="match-good">‚óè Close match</span></td>
                </tr>
                <tr>
                    <td class="td-label">Costco</td>
                    <td>Sep 22, 2024</td>
                    <td class="td-red">+1.8%</td>
                    <td class="td-red">‚àí4.5%</td>
                    <td>‚àí3.8%</td>
                    <td><span class="match-ok">‚óè Directional match</span></td>
                </tr>
                <tr>
                    <td class="td-label">Costco</td>
                    <td>Mar 10, 2024</td>
                    <td class="td-green">‚àí2.5%</td>
                    <td class="td-green">+4.8%</td>
                    <td>+5.3%</td>
                    <td><span class="match-good">‚óè Close match</span></td>
                </tr>
                <tr>
                    <td class="td-label">Sam's Club</td>
                    <td>Jul 1, 2024</td>
                    <td class="td-red">+2.8%</td>
                    <td class="td-red">‚àí5.1%</td>
                    <td>‚àí5.0%</td>
                    <td><span class="match-good">‚óè Close match</span></td>
                </tr>
                <tr>
                    <td class="td-label">Sam's Club</td>
                    <td>Nov 12, 2024</td>
                    <td class="td-red">+1.5%</td>
                    <td class="td-red">‚àí2.1%</td>
                    <td>‚àí2.7%</td>
                    <td><span class="match-ok">‚óè Directional match</span></td>
                </tr>
            </tbody>
        </table>

        <div class="evidence">
            Match criteria: "Close match" = observed within ¬±1.5pp of predicted | "Directional match" = same direction, within ¬±3pp | "Poor match" = >3pp difference or wrong direction<br>
            Method: 4-week avg volume after price change vs 4-week avg before | Model prediction: retailer-specific elasticity √ó price change %<br>
            Threshold: only weeks where |base price change| > 1% shown
        </div>
    </div>

    <div class="divider"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- SCENARIO PLANNER (Season-Aware v3)                        -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Scenario Planner</div>
        <div class="section-title">Build Your Own Pricing Scenario</div>
        <div class="section-desc">
            Adjust base price, promotional discount, and allocate promo weeks by season to see 
            how timing affects both volume and revenue lift. Summer promos generate more 
            absolute return because they compound on a higher seasonal baseline.
        </div>

        <div class="simulator">
            <h4>üìê Season-Aware Pricing & Promotion Simulator</h4>

            <!-- Row 1: Price + Discount -->
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-bottom:20px;">
                <div class="sim-control">
                    <label>Base Price Change</label>
                    <input type="range" id="sim-price" min="-5" max="5" value="0" step="0.5">
                    <div class="sim-val" id="sim-price-val">0.0%</div>
                </div>
                <div class="sim-control">
                    <label>Promo Discount Depth</label>
                    <input type="range" id="sim-promo" min="0" max="25" value="10" step="1">
                    <div class="sim-val" id="sim-promo-val">10% off</div>
                </div>
            </div>

            <!-- Row 2: Seasonal promo week allocation -->
            <div style="margin-bottom:6px;">
                <label style="font-size:10px;font-weight:500;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;">
                    Promo Weeks by Season 
                    <span style="font-family:var(--mono);font-size:10px;color:var(--text-secondary);margin-left:8px;" id="sim-total-weeks">Total: 4 of 52 weeks</span>
                </label>
            </div>
            <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-bottom:20px;">
                <div class="sim-control">
                    <label style="display:flex;align-items:center;gap:5px;">
                        <span style="width:8px;height:8px;border-radius:50%;background:#94a3b8;display:inline-block;"></span>
                        Winter <span style="font-family:var(--mono);font-size:9px;color:var(--text-muted);">(baseline)</span>
                    </label>
                    <input type="range" id="sim-w-winter" min="0" max="13" value="0" step="1">
                    <div class="sim-val" id="sim-w-winter-val">0 wks</div>
                </div>
                <div class="sim-control">
                    <label style="display:flex;align-items:center;gap:5px;">
                        <span style="width:8px;height:8px;border-radius:50%;background:var(--green);display:inline-block;"></span>
                        Spring <span style="font-family:var(--mono);font-size:9px;color:var(--green);">+9.4%</span>
                    </label>
                    <input type="range" id="sim-w-spring" min="0" max="13" value="0" step="1">
                    <div class="sim-val" id="sim-w-spring-val">0 wks</div>
                </div>
                <div class="sim-control">
                    <label style="display:flex;align-items:center;gap:5px;">
                        <span style="width:8px;height:8px;border-radius:50%;background:var(--amber);display:inline-block;"></span>
                        Summer <span style="font-family:var(--mono);font-size:9px;color:var(--amber);">+21.8%</span>
                    </label>
                    <input type="range" id="sim-w-summer" min="0" max="13" value="4" step="1">
                    <div class="sim-val" id="sim-w-summer-val">4 wks</div>
                </div>
                <div class="sim-control">
                    <label style="display:flex;align-items:center;gap:5px;">
                        <span style="width:8px;height:8px;border-radius:50%;background:var(--purple);display:inline-block;"></span>
                        Fall <span style="font-family:var(--mono);font-size:9px;color:var(--purple);">+2.2%</span>
                    </label>
                    <input type="range" id="sim-w-fall" min="0" max="13" value="0" step="1">
                    <div class="sim-val" id="sim-w-fall-val">0 wks</div>
                </div>
            </div>

            <div class="sim-output" id="sim-output"></div>

            <!-- Formula transparency box -->
            <div id="sim-formulas" style="margin-top:14px;"></div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- KEY FINDINGS SUMMARY (dynamically generated from model)   -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="section">
        <div class="section-label">Summary</div>
        <div class="section-title">Key Findings</div>
        <div class="section-desc" style="font-size:12px;color:var(--text-muted);margin-bottom:12px;">
            Click any finding to expand the supporting evidence. All numbers, rankings, and rationale are 
            generated directly from model coefficients ‚Äî nothing is manually authored.
        </div>

        <table id="findings-table">
            <thead>
                <tr><th>#</th><th>Finding</th><th>Applies To</th><th>Confidence</th></tr>
            </thead>
            <tbody id="findings-body">
                <!-- generated by JS -->
            </tbody>
        </table>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- FOOTER                                                    -->
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="footer">
        <div>Bayesian Hierarchical Model ¬∑ 479 obs ¬∑ 4 chains √ó 2,000 draws</div>
        <div>Generated Feb 7, 2026 ¬∑ 95% Credible Intervals</div>
    </div>

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- JS: SCENARIO SIMULATOR                                    -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
// ‚îÄ‚îÄ Retailer elasticities (from posterior means) ‚îÄ‚îÄ
const R = {
    'Overall':    { base: -1.836, promo: -4.249 },
    "BJ's":       { base: -1.65,  promo: -4.45  },
    'Costco':     { base: -2.10,  promo: -3.85  },
    "Sam's Club": { base: -1.78,  promo: -4.42  }
};
const ORDER = ['Overall', "BJ's", "Costco", "Sam's Club"];

// ‚îÄ‚îÄ Seasonal coefficients (from model Œ≤_season) ‚îÄ‚îÄ
// These are SHARED across retailers (not hierarchical)
const SEASON = {
    winter: { beta: 0.000, multiplier: 1.000, maxWeeks: 13, label: 'Winter' },
    spring: { beta: 0.090, multiplier: Math.exp(0.090), maxWeeks: 13, label: 'Spring' },
    summer: { beta: 0.197, multiplier: Math.exp(0.197), maxWeeks: 13, label: 'Summer' },
    fall:   { beta: 0.022, multiplier: Math.exp(0.022), maxWeeks: 13, label: 'Fall' }
};

// ‚îÄ‚îÄ Demand erosion (from model Œ≤_time) ‚îÄ‚îÄ
const BETA_TIME = -0.00090;
const ANNUAL_EROSION_PCT = (Math.exp(BETA_TIME * 52) - 1) * 100;  // ‚âà ‚àí4.6%

// ‚îÄ‚îÄ DOM refs ‚îÄ‚îÄ
const simPrice = document.getElementById('sim-price');
const simPromo = document.getElementById('sim-promo');
const simPriceVal = document.getElementById('sim-price-val');
const simPromoVal = document.getElementById('sim-promo-val');
const simTotalWeeks = document.getElementById('sim-total-weeks');
const simOut = document.getElementById('sim-output');
const simFormulas = document.getElementById('sim-formulas');

const seasonSliders = {};
const seasonVals = {};
for (const s of ['winter','spring','summer','fall']) {
    seasonSliders[s] = document.getElementById('sim-w-' + s);
    seasonVals[s] = document.getElementById('sim-w-' + s + '-val');
}

function pill(prob) {
    if (prob >= 0.95) return '<span class="pill pill-high">HIGH</span>';
    if (prob >= 0.80) return '<span class="pill pill-med">MODERATE</span>';
    return '<span class="pill pill-low">LOW</span>';
}

function fmt(v) { return (v >= 0 ? '+' : '') + v.toFixed(1) + '%'; }
function fmtD(v) { return (v >= 0 ? '+' : '') + '$' + Math.abs(v).toFixed(0); }

function update() {
    const pc = parseFloat(simPrice.value);
    const disc = parseFloat(simPromo.value);

    // Read seasonal promo weeks
    const pw = {};
    let totalPromoWeeks = 0;
    for (const s of ['winter','spring','summer','fall']) {
        pw[s] = parseInt(seasonSliders[s].value);
        totalPromoWeeks += pw[s];
        seasonVals[s].textContent = pw[s] + ' wks';
    }
    const totalNonPromoWeeks = 52 - totalPromoWeeks;

    // Cap warning
    const overCap = totalPromoWeeks > 52;
    simTotalWeeks.innerHTML = 'Total: ' + totalPromoWeeks + ' of 52 weeks'
        + (overCap ? ' <span style="color:var(--red);font-weight:600;">‚ö† exceeds 52</span>' : '');

    simPriceVal.textContent = (pc >= 0 ? '+' : '') + pc.toFixed(1) + '%';
    simPromoVal.textContent = disc === 0 ? 'No promo' : disc + '% off';

    // ‚îÄ‚îÄ Compute per retailer ‚îÄ‚îÄ
    let h = '<table style="margin:0;"><thead><tr>';
    h += '<th>Retailer</th><th>Base Week<br>Vol Lift</th><th>Base Week<br>Rev Impact</th>';
    h += '<th>Promo Week<br>Vol Lift</th><th>Promo Week<br>Rev Impact</th>';
    h += '<th>Blended<br>Annual Vol</th><th>Blended<br>Annual Rev</th><th>Confidence</th>';
    h += '</tr></thead><tbody>';

    for (const nm of ORDER) {
        const r = R[nm];
        const isO = nm === 'Overall';

        // ‚îÄ‚îÄ BASE WEEK (non-promo) ‚îÄ‚îÄ
        // Volume lift from base price change (log-log: elasticity √ó % change)
        const baseVolPct = r.base * pc;
        // Revenue = (1 + vol_change) √ó (1 + price_change) ‚àí 1
        const baseRevPct = ((1 + baseVolPct/100) * (1 + pc/100) - 1) * 100;

        // ‚îÄ‚îÄ PROMO WEEK (per season) ‚îÄ‚îÄ
        // For each season: promo vol lift = (e^(Œ≤_promo √ó ‚àídepth) ‚àí 1) √ó 100
        // This % lift is the SAME regardless of season (promo effect is additive in log-space)
        // But absolute volume differs because seasonal base is higher
        const promoVolPctFromDiscount = disc > 0 ? (Math.exp(r.promo * (-disc/100)) - 1) * 100 : 0;
        // Combined promo week vol lift = base price effect + promo discount effect
        const promoVolPctTotal = baseVolPct + promoVolPctFromDiscount;

        // Promo week revenue: volume changes by promoVolPctTotal, price = base_price √ó (1+pc/100) √ó (1‚àídisc/100)
        const effectivePrice = (1 + pc/100) * (1 - disc/100);
        const promoRevPct = disc > 0 ? ((1 + promoVolPctTotal/100) * effectivePrice - 1) * 100 : 0;

        // ‚îÄ‚îÄ BLENDED ANNUAL (season-weighted) ‚îÄ‚îÄ
        // Non-promo weeks per season: 13 ‚àí promo_weeks_in_that_season
        // Each season has a volume multiplier e^(Œ≤_season) applied to ABSOLUTE volume
        // The % lift from price/promo is the same, but the base volume differs
        //
        // Annual volume index = Œ£_season [ (non_promo_wks √ó base_vol_mult √ó season_mult)
        //                                 + (promo_wks √ó promo_vol_mult √ó season_mult) ]
        // compared to baseline: Œ£_season [ 13 √ó 1.0 √ó season_mult ]  (no price change, no promo)

        let weightedVol = 0;       // new scenario
        let weightedRev = 0;       // new scenario
        let baselineVol = 0;       // status quo (no changes)
        let baselineRev = 0;       // status quo

        for (const s of ['winter','spring','summer','fall']) {
            const sm = SEASON[s].multiplier;   // seasonal volume multiplier
            const promoWks = pw[s];
            const nonPromoWks = 13 - promoWks;

            // Baseline: 13 weeks √ó seasonal multiplier √ó base revenue (price=1, vol=1)
            baselineVol += 13 * sm;
            baselineRev += 13 * sm * 1.0;  // price factor = 1.0 (no change)

            // Scenario: non-promo weeks
            const nonPromoVolFactor = (1 + baseVolPct/100);
            const nonPromoPriceFactor = (1 + pc/100);
            weightedVol += nonPromoWks * sm * nonPromoVolFactor;
            weightedRev += nonPromoWks * sm * nonPromoVolFactor * nonPromoPriceFactor;

            // Scenario: promo weeks
            if (promoWks > 0 && disc > 0) {
                const promoVolFactor = (1 + promoVolPctTotal/100);
                weightedVol += promoWks * sm * promoVolFactor;
                weightedRev += promoWks * sm * promoVolFactor * effectivePrice;
            } else {
                // No discount ‚Üí promo weeks behave like base weeks
                weightedVol += promoWks * sm * nonPromoVolFactor;
                weightedRev += promoWks * sm * nonPromoVolFactor * nonPromoPriceFactor;
            }
        }

        const blendedVolPct = (weightedVol / baselineVol - 1) * 100;
        const blendedRevPct = (weightedRev / baselineRev - 1) * 100;

        // Confidence heuristic
        const conf = Math.abs(blendedRevPct) > 2 ? 0.95 : Math.abs(blendedRevPct) > 0.5 ? 0.85 : 0.6;

        // Row styling
        const rs = isO ? ' style="font-weight:600;background:var(--surface-hover);"' : '';
        const bvc = baseVolPct >= 0 ? 'td-green' : 'td-red';
        const brc = baseRevPct >= 0 ? 'td-green' : 'td-red';
        const pvc = promoVolPctTotal >= 0 ? 'td-green' : 'td-red';
        const prc = promoRevPct >= 0 ? 'td-green' : 'td-red';
        const avc = blendedVolPct >= 0 ? 'td-green' : 'td-red';
        const arc = blendedRevPct >= 0 ? 'td-green' : 'td-red';
        const noPromo = disc === 0;

        h += '<tr' + rs + '>';
        h += '<td class="td-label">' + nm + '</td>';
        h += '<td class="' + bvc + '">' + fmt(baseVolPct) + '</td>';
        h += '<td class="' + brc + '">' + fmt(baseRevPct) + '</td>';
        h += '<td class="' + (noPromo ? 'td-muted' : pvc) + '">' + (noPromo ? '‚Äî' : fmt(promoVolPctTotal)) + '</td>';
        h += '<td class="' + (noPromo ? 'td-muted' : prc) + '">' + (noPromo ? '‚Äî' : fmt(promoRevPct)) + '</td>';
        h += '<td class="' + avc + '" style="font-weight:600;">' + fmt(blendedVolPct) + '</td>';
        h += '<td class="' + arc + '" style="font-weight:600;">' + fmt(blendedRevPct) + '</td>';
        h += '<td>' + pill(conf) + '</td>';
        h += '</tr>';
    }
    h += '</tbody></table>';

    // ‚îÄ‚îÄ Demand Erosion Projection ‚îÄ‚îÄ
    // Store the Overall blended rev for the projection summary
    const overallBlendRev = (() => {
        const r = R['Overall'];
        const baseVolPctO = r.base * pc;
        const baseRevPctO = ((1 + baseVolPctO/100) * (1 + pc/100) - 1) * 100;
        const promoVolFromDiscO = disc > 0 ? (Math.exp(r.promo * (-disc/100)) - 1) * 100 : 0;
        const promoVolTotalO = baseVolPctO + promoVolFromDiscO;
        const effPriceO = (1 + pc/100) * (1 - disc/100);
        let wV = 0, wR = 0, bV = 0, bR = 0;
        for (const s of ['winter','spring','summer','fall']) {
            const sm = SEASON[s].multiplier;
            const pW = pw[s]; const npW = 13 - pW;
            bV += 13 * sm; bR += 13 * sm;
            const npVF = (1 + baseVolPctO/100); const npPF = (1 + pc/100);
            wV += npW * sm * npVF; wR += npW * sm * npVF * npPF;
            if (pW > 0 && disc > 0) {
                const pVF = (1 + promoVolTotalO/100);
                wV += pW * sm * pVF; wR += pW * sm * pVF * effPriceO;
            } else { wV += pW * sm * npVF; wR += pW * sm * npVF * npPF; }
        }
        return (wR / bR - 1) * 100;
    })();

    h += '<div style="margin-top:16px;padding:16px 18px;background:rgba(248,113,113,0.06);border:1px solid rgba(248,113,113,0.15);border-radius:8px;">';
    h += '<div style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;color:var(--red);margin-bottom:10px;">üìâ Net Impact After Demand Erosion (‚àí' + Math.abs(ANNUAL_EROSION_PCT).toFixed(1) + '% / year)</div>';
    h += '<table style="margin:0;"><thead><tr>';
    h += '<th>Year</th><th>Strategy Impact</th><th>Cumulative Erosion</th><th>Net Revenue Impact</th><th>Verdict</th>';
    h += '</tr></thead><tbody>';

    for (let yr = 1; yr <= 3; yr++) {
        const cumErosion = (Math.pow(1 + ANNUAL_EROSION_PCT/100, yr) - 1) * 100;
        const netRev = overallBlendRev + cumErosion;
        const nc = netRev >= 0 ? 'td-green' : 'td-red';
        const verdict = netRev >= 1 ? '<span class="pill pill-high" style="font-size:10px;">GROWING</span>'
                      : netRev >= -1 ? '<span class="pill pill-med" style="font-size:10px;">FLAT</span>'
                      : '<span class="pill pill-low" style="font-size:10px;">DECLINING</span>';
        h += '<tr>';
        h += '<td class="td-label">Year ' + yr + '</td>';
        h += '<td class="td-green" style="font-weight:600;">' + fmt(overallBlendRev) + '</td>';
        h += '<td class="td-red">' + fmt(cumErosion) + '</td>';
        h += '<td class="' + nc + '" style="font-weight:600;">' + fmt(netRev) + '</td>';
        h += '<td>' + verdict + '</td>';
        h += '</tr>';
    }
    h += '</tbody></table>';
    h += '</div>';

    simOut.innerHTML = h;

    // ‚îÄ‚îÄ Formula transparency ‚îÄ‚îÄ
    let f = '<div class="evidence">';
    f += '<strong style="color:var(--text);font-family:var(--sans);font-size:12px;">How this is calculated</strong><br><br>';
    f += '<span style="color:var(--text-secondary);text-decoration:underline;">Per-week impacts:</span><br>';
    f += '<span style="color:var(--text-secondary);">Volume lift (base week):</span> base_elasticity √ó price_change_%<br>';
    f += '<span style="color:var(--text-secondary);">Volume lift (promo week):</span> (e<sup>(Œ≤_promo √ó ‚àídiscount/100)</sup> ‚àí 1) √ó 100 + base_vol_lift<br>';
    f += '<span style="color:var(--text-secondary);">Revenue impact (any week):</span> (1 + vol_lift/100) √ó effective_price_factor ‚àí 1<br>';
    f += '<span style="color:var(--text-secondary);">Effective price (base week):</span> 1 + price_change/100<br>';
    f += '<span style="color:var(--text-secondary);">Effective price (promo week):</span> (1 + price_change/100) √ó (1 ‚àí discount/100)<br><br>';
    f += '<span style="color:var(--text-secondary);text-decoration:underline;">Seasonal multipliers:</span><br>';
    f += '<span style="color:var(--text-secondary);">Season multiplier:</span> e<sup>Œ≤_season</sup> ‚Üí ';
    f += 'Winter = 1.000, Spring = ' + SEASON.spring.multiplier.toFixed(3) + ', ';
    f += 'Summer = ' + SEASON.summer.multiplier.toFixed(3) + ', Fall = ' + SEASON.fall.multiplier.toFixed(3) + '<br>';
    f += '<span style="color:var(--text-secondary);">% volume lift is the same in every season</span> (promo effect is additive in log-space)<br>';
    f += '<span style="color:var(--text-secondary);">But absolute volume gain is higher in peak seasons</span> (multiplier compounds on larger base)<br><br>';

    // Blended formula
    f += '<span style="color:var(--text-secondary);text-decoration:underline;">Blended annual (strategy impact):</span><br>';
    f += '&nbsp;&nbsp;Scenario_index = Œ£<sub>season</sub> [ non_promo_wks √ó season_mult √ó vol_factor √ó price_factor<br>';
    f += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ promo_wks √ó season_mult √ó promo_vol_factor √ó effective_price ]<br>';
    f += '&nbsp;&nbsp;Baseline_index = Œ£<sub>season</sub> [ 13 √ó season_mult ]<br>';
    f += '&nbsp;&nbsp;Blended % = (Scenario_index / Baseline_index ‚àí 1) √ó 100<br><br>';

    // Demand erosion
    f += '<span style="color:var(--text-secondary);text-decoration:underline;">Demand erosion projection:</span><br>';
    f += '<span style="color:var(--text-secondary);">The model estimates Œ≤_time = ' + BETA_TIME.toFixed(5) + ' (weekly), capturing organic demand decline</span><br>';
    f += '<span style="color:var(--text-secondary);">independent of price, promos, and seasonality.</span><br>';
    f += '&nbsp;&nbsp;Annual erosion = (e<sup>Œ≤_time √ó 52</sup> ‚àí 1) √ó 100 = ' + fmt(ANNUAL_EROSION_PCT) + '<br>';
    f += '&nbsp;&nbsp;Cumulative erosion (Year N) = (1 + annual_erosion/100)<sup>N</sup> ‚àí 1<br>';
    f += '&nbsp;&nbsp;Net revenue impact = Strategy blended annual + Cumulative erosion<br><br>';
    f += '<span style="color:var(--text-secondary);">Strategy impact is what you control (pricing + promos).</span><br>';
    f += '<span style="color:var(--text-secondary);">Erosion is what is happening to baseline demand regardless of your actions.</span><br>';
    f += '<span style="color:var(--text-secondary);">Net impact tells you whether your strategy outpaces the decline.</span><br><br>';

    f += '<span style="color:var(--text-secondary);">Current allocation:</span> ';
    for (const s of ['winter','spring','summer','fall']) {
        if (pw[s] > 0) f += SEASON[s].label + ': ' + pw[s] + ' wks &nbsp;¬∑&nbsp; ';
    }
    f += 'Non-promo: ' + totalNonPromoWeeks + ' wks';

    f += '</div>';
    simFormulas.innerHTML = f;
}

// ‚îÄ‚îÄ Bind all sliders ‚îÄ‚îÄ
simPrice.addEventListener('input', update);
simPromo.addEventListener('input', update);
for (const s of ['winter','spring','summer','fall']) {
    seasonSliders[s].addEventListener('input', update);
}
update();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DYNAMIC KEY FINDINGS (generated from model coefficients)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
(function() {
    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
    const f1 = v => (v >= 0 ? '+' : '') + v.toFixed(1) + '%';
    const f2 = v => (v >= 0 ? '+' : '') + v.toFixed(2);
    const abs = Math.abs;
    const exp = Math.exp;
    const n = v => '<span class="r-num">' + v + '</span>';

    // ‚îÄ‚îÄ Derived quantities from existing constants (R, SEASON, BETA_TIME) ‚îÄ‚îÄ
    const retailers = ["BJ's", "Costco", "Sam's Club"];

    // Base elasticities
    const baseO = R['Overall'].base;
    const promoO = R['Overall'].promo;

    // Per-retailer base & promo
    const rData = retailers.map(nm => ({
        name: nm,
        base: R[nm].base,
        promo: R[nm].promo,
        absBase: abs(R[nm].base),
        absPromo: abs(R[nm].promo),
        ratio: abs(R[nm].promo) / abs(R[nm].base)
    }));

    // Rankings by |base elasticity|
    const byBase = [...rData].sort((a, b) => a.absBase - b.absBase);
    const least = byBase[0], mid = byBase[1], most = byBase[2];

    // Rankings by promo/base ratio
    const byRatio = [...rData].sort((a, b) => b.ratio - a.ratio);
    const topHiLo = byRatio[0], runnerUp = byRatio[1];

    // Overall ratio
    const overallRatio = abs(promoO) / abs(baseO);

    // Seasonal
    const seasons = [
        { name: 'Spring', beta: SEASON.spring.beta, mult: SEASON.spring.multiplier },
        { name: 'Summer', beta: SEASON.summer.beta, mult: SEASON.summer.multiplier },
        { name: 'Fall',   beta: SEASON.fall.beta,   mult: SEASON.fall.multiplier }
    ];
    const peakSeason = seasons.reduce((a, b) => b.beta > a.beta ? b : a);
    const peakPct = (peakSeason.mult - 1) * 100;

    // Time trend
    const annualErosion = (exp(BETA_TIME * 52) - 1) * 100;
    const cum3yr = (Math.pow(1 + annualErosion / 100, 3) - 1) * 100;

    // Cross-price (hardcoded in mockup ‚Äî in production, inject from results)
    const crossMean = -0.094;
    const crossCILow = -0.229;
    const crossCIHigh = 0.040;
    const crossIncludesZero = (crossCILow < 0 && crossCIHigh > 0);

    // Revenue per 1pp at different discount depths
    function revPer1pp(depth) {
        const d = -depth / 100;
        const volPct = (exp(promoO * d) - 1) * 100;
        const revPct = ((1 + volPct / 100) * (1 - depth / 100) - 1) * 100;
        return revPct / depth;
    }

    // Volume/revenue at a given base price change
    function baseImpact(pct) {
        const vol = baseO * pct;
        const rev = ((1 + vol / 100) * (1 + pct / 100) - 1) * 100;
        return { vol, rev };
    }

    // Volume at a given promo depth
    function promoVol(depth) {
        return (exp(promoO * (-depth / 100)) - 1) * 100;
    }

    // ‚îÄ‚îÄ Pill helper ‚îÄ‚îÄ
    function pillH(level) {
        if (level === 'high') return '<span class="pill pill-high">HIGH</span>';
        if (level === 'med')  return '<span class="pill pill-med">MODERATE</span>';
        if (level === 'low')  return '<span class="pill pill-low">LOW</span>';
        return '<span class="pill" style="background:rgba(255,255,255,0.06);color:var(--text-muted);">N/A</span>';
    }

    // ‚îÄ‚îÄ Build findings array ‚îÄ‚îÄ
    const isElastic = abs(baseO) > 1;
    const imp3 = baseImpact(3);

    const findings = [
        {
            num: 1,
            color: 'var(--red)',
            title: isElastic
                ? 'Demand is elastic ‚Äî any base price increase reduces revenue'
                : 'Demand is inelastic ‚Äî moderate price increases may grow revenue',
            applies: 'All retailers',
            confidence: isElastic ? 'high' : 'med',
            rationale: (() => {
                let r = '<span class="r-label">Evidence</span>';
                r += 'Overall base elasticity = ' + n(baseO.toFixed(2));
                r += '. Since |Œµ| ' + (isElastic ? '&gt; 1' : '&lt; 1');
                r += ', volume drops ' + (isElastic ? 'faster' : 'slower') + ' than price rises. ';
                r += 'A +3% price increase yields ' + n(f1(imp3.vol)) + ' volume and ' + n(f1(imp3.rev)) + ' net revenue.<br><br>';
                r += '<span class="r-label">By Retailer</span>';
                for (const rd of byBase) {
                    const i3 = baseImpact(3);
                    const rv = rd.base * 3;
                    const rr = ((1 + rv/100) * (1 + 3/100) - 1) * 100;
                    r += '<span class="r-retailer">' + rd.name + ' &nbsp;Œµ = ' + n(rd.base.toFixed(2)) + ' &nbsp;‚Üí +3% price = ' + n(f1(rr)) + ' revenue</span>';
                }
                r += '<br><br>' + most.name + ' is ' + n(((most.absBase / least.absBase - 1) * 100).toFixed(0) + '%') + ' more price-sensitive than ' + least.name + '.';
                return r;
            })()
        },
        {
            num: 2,
            color: 'var(--green)',
            title: 'Promotions are ' + overallRatio.toFixed(1) + '√ó more effective than base price changes',
            applies: 'All retailers (' + topHiLo.name + ' highest at ' + topHiLo.ratio.toFixed(1) + '√ó)',
            confidence: 'high',
            rationale: (() => {
                const v10 = promoVol(10);
                let r = '<span class="r-label">Evidence</span>';
                r += 'Overall promo elasticity ' + n(promoO.toFixed(2)) + ' is ' + n(overallRatio.toFixed(1) + '√ó');
                r += ' the base elasticity ' + n(baseO.toFixed(2)) + '. ';
                r += 'A 10% discount generates ' + n(f1(v10)) + ' volume lift.<br><br>';
                r += '<span class="r-label">Promo/Base Ratio by Retailer</span>';
                for (const rd of byRatio) {
                    r += '<span class="r-retailer">' + rd.name + ' &nbsp;' + n(rd.ratio.toFixed(1) + '√ó');
                    r += ' &nbsp;(promo: ' + rd.promo.toFixed(2) + ', base: ' + rd.base.toFixed(2) + ')</span>';
                }
                r += '<br><br>' + topHiLo.name + ' gets ' + n(topHiLo.ratio.toFixed(1) + '√ó') + ' return from promo dollars vs. permanent price reductions ‚Äî strongest Hi-Lo candidate.';
                return r;
            })()
        },
        {
            num: 3,
            color: 'var(--green)',
            title: 'Moderate discounts (10%) more efficient than deep discounts (20%)',
            applies: 'All retailers',
            confidence: 'high',
            rationale: (() => {
                let r = '<span class="r-label">Evidence ‚Äî Revenue efficiency per 1pp of discount</span>';
                r += '<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:8px 0 12px;">';
                for (const d of [5, 10, 15, 20]) {
                    const rpp = revPer1pp(d);
                    const vol = promoVol(d);
                    const rev = ((1 + vol / 100) * (1 - d / 100) - 1) * 100;
                    r += '<div style="background:var(--surface);padding:8px 10px;border-radius:4px;border:1px solid var(--border);text-align:center;">';
                    r += '<div style="font-size:10px;color:var(--text-muted);text-transform:uppercase;">' + d + '% off</div>';
                    r += '<div style="font-family:var(--mono);font-size:14px;font-weight:600;color:var(--text);margin:4px 0;">' + f1(rev) + '</div>';
                    r += '<div style="font-size:10px;color:var(--text-muted);">rev | ' + rpp.toFixed(2) + '% per 1pp</div>';
                    r += '</div>';
                }
                r += '</div>';
                r += 'The exponential model (e<sup>(Œ≤√ódepth)</sup>) inherently produces diminishing marginal returns. ';
                r += 'Each additional percentage-point of discount generates less incremental revenue than the previous one. ';
                r += 'Revenue per 1pp drops from ' + n(revPer1pp(5).toFixed(2) + '%') + ' at 5% off to ' + n(revPer1pp(20).toFixed(2) + '%') + ' at 20% off.';
                return r;
            })()
        },
        {
            num: 4,
            color: 'var(--amber)',
            title: peakSeason.name + ' promotions generate ~' + peakPct.toFixed(0) + '% more absolute volume than Winter',
            applies: 'All retailers (shared)',
            confidence: peakPct > 10 ? 'high' : 'med',
            rationale: (() => {
                let r = '<span class="r-label">Evidence ‚Äî Seasonal volume multipliers</span>';
                r += '<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:8px 0 12px;">';
                const allSeasons = [{ name: 'Winter', beta: 0, mult: 1.0 }, ...seasons];
                for (const s of allSeasons) {
                    const pct = (s.mult - 1) * 100;
                    const isPeak = s.name === peakSeason.name;
                    r += '<div style="background:var(--surface);padding:8px 10px;border-radius:4px;border:1px solid ' + (isPeak ? 'var(--amber)' : 'var(--border)') + ';text-align:center;">';
                    r += '<div style="font-size:10px;color:var(--text-muted);">' + s.name + '</div>';
                    r += '<div style="font-family:var(--mono);font-size:14px;font-weight:600;color:' + (isPeak ? 'var(--amber)' : 'var(--text)') + ';margin:4px 0;">';
                    r += pct === 0 ? 'baseline' : '+' + pct.toFixed(1) + '%';
                    r += '</div>';
                    r += '<div style="font-size:10px;color:var(--text-muted);">e<sup>' + s.beta.toFixed(3) + '</sup> = ' + s.mult.toFixed(3) + '</div>';
                    r += '</div>';
                }
                r += '</div>';
                r += 'A 10% discount produces the same ' + n(f1(promoVol(10))) + ' volume lift in every season. ';
                r += 'But because ' + peakSeason.name + '\'s base volume is ' + n('+' + peakPct.toFixed(0) + '%') + ' higher, ';
                r += 'the absolute unit gain is ~' + peakPct.toFixed(0) + '% larger. ';
                r += 'Concentrating promo spend in ' + peakSeason.name + ' generates more incremental dollars per promo dollar invested.';
                return r;
            })()
        },
        {
            num: 5,
            color: 'var(--red)',
            title: 'Underlying demand ' + (annualErosion < 0 ? 'declining' : 'growing') + ' ' + f1(annualErosion) + ' annually',
            applies: 'All retailers (shared)',
            confidence: 'high',
            rationale: (() => {
                let r = '<span class="r-label">Evidence</span>';
                r += 'Œ≤_time = ' + n(BETA_TIME.toFixed(5)) + ' per week ‚Üí annualized: ' + n(f1(annualErosion)) + '. ';
                r += 'This is after controlling for price, promos, and seasonality ‚Äî it captures organic demand shift.<br><br>';
                r += '<span class="r-label">Multi-year cumulative impact</span>';
                r += '<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:8px 0 12px;">';
                for (let yr = 1; yr <= 3; yr++) {
                    const cum = (Math.pow(1 + annualErosion / 100, yr) - 1) * 100;
                    r += '<div style="background:var(--surface);padding:8px 10px;border-radius:4px;border:1px solid var(--border);text-align:center;">';
                    r += '<div style="font-size:10px;color:var(--text-muted);">Year ' + yr + '</div>';
                    r += '<div style="font-family:var(--mono);font-size:14px;font-weight:600;color:var(--red);margin:4px 0;">' + f1(cum) + '</div>';
                    r += '<div style="font-size:10px;color:var(--text-muted);">cumulative</div>';
                    r += '</div>';
                }
                r += '</div>';
                r += 'Without pricing or promotional action to offset, baseline volume erodes ' + n(f1(cum3yr)) + ' over 3 years. ';
                r += 'Any strategy must generate positive revenue impact exceeding ' + n(f1(abs(annualErosion))) + ' annually to maintain current revenue levels.';
                return r;
            })()
        },
        {
            num: 6,
            color: 'var(--green)',
            title: 'Private Label pricing has ' + (crossIncludesZero ? 'negligible' : 'meaningful') + ' impact on SI volume',
            applies: "BJ's, Sam's Club",
            confidence: crossIncludesZero ? 'low' : 'high',
            rationale: (() => {
                let r = '<span class="r-label">Evidence</span>';
                r += 'Cross-price elasticity = ' + n(crossMean.toFixed(3));
                r += ' (95% range: ' + n(crossCILow.toFixed(3)) + ' to ' + n(f2(crossCIHigh)) + '). ';
                r += 'The credible interval ' + (crossIncludesZero ? '<strong>includes zero</strong>' : 'excludes zero');
                r += ', meaning PL pricing ' + (crossIncludesZero ? 'cannot be confidently distinguished from no effect' : 'has a statistically credible effect') + '.<br><br>';
                r += '<span class="r-label">Practical implication</span>';
                if (crossIncludesZero) {
                    r += 'Competitor Private Label price movements should <strong>not</strong> be a primary input to Sparkling Ice pricing decisions. ';
                    r += 'A 5% PL price change would shift SI volume by only ~' + n(f1(crossMean * 5)) + ' on the mean estimate ‚Äî ';
                    r += 'and the true effect could be anywhere from ' + n(f1(crossCILow * 5)) + ' to ' + n(f1(crossCIHigh * 5)) + '.';
                } else {
                    r += 'Competitor pricing has a detectable effect. Consider monitoring PL pricing as part of the pricing strategy.';
                }
                r += '<br><br><em style="color:var(--text-muted);">Costco excluded ‚Äî no Private Label data available (has_competitor = 0).</em>';
                return r;
            })()
        },
        {
            num: 7,
            color: 'var(--blue)',
            title: least.name + ' is least price-sensitive; ' + most.name + ' is most price-sensitive',
            applies: 'Retailer-specific',
            confidence: 'high',
            rationale: (() => {
                const pctDiff = ((most.absBase / least.absBase - 1) * 100).toFixed(0);
                const lImp = baseImpact(1);
                let r = '<span class="r-label">Evidence ‚Äî Ranked by |base elasticity|</span>';
                r += '<div style="margin:8px 0 12px;">';
                for (let i = 0; i < byBase.length; i++) {
                    const rd = byBase[i];
                    const label = i === 0 ? 'Least sensitive' : i === byBase.length - 1 ? 'Most sensitive' : 'Mid-range';
                    const barW = (rd.absBase / most.absBase * 80).toFixed(0);
                    const rv = rd.base * 1;
                    const rr = ((1 + rv/100) * (1 + 1/100) - 1) * 100;
                    r += '<div style="display:grid;grid-template-columns:90px 1fr 100px;align-items:center;gap:10px;margin:4px 0;">';
                    r += '<div style="font-size:11px;">' + rd.name + '</div>';
                    r += '<div style="position:relative;height:22px;background:var(--surface);border-radius:3px;overflow:hidden;">';
                    r += '<div style="position:absolute;left:0;top:0;height:100%;width:' + barW + '%;background:rgba(96,165,250,0.25);border-radius:3px;"></div>';
                    r += '<div style="position:relative;padding:3px 8px;font-family:var(--mono);font-size:11px;">' + rd.base.toFixed(2) + '</div>';
                    r += '</div>';
                    r += '<div style="font-size:10px;color:var(--text-muted);text-align:right;">' + label + '</div>';
                    r += '</div>';
                }
                r += '</div>';
                r += 'A 1% price increase at ' + most.name + ' loses ' + n(pctDiff + '%') + ' more volume than the same increase at ' + least.name + '. ';
                r += least.name + ' is the safest retailer for price adjustments; ' + most.name + ' requires the most caution.';
                return r;
            })()
        },
        {
            num: 8,
            color: 'var(--blue)',
            title: topHiLo.name + ' has the highest promo-to-base ratio (' + topHiLo.ratio.toFixed(1) + '√ó) ‚Äî best Hi-Lo candidate',
            applies: topHiLo.name,
            confidence: 'high',
            rationale: (() => {
                let r = '<span class="r-label">Evidence ‚Äî Promo/Base ratio</span>';
                r += '<div style="margin:8px 0 12px;">';
                for (const rd of byRatio) {
                    const barW = (rd.ratio / topHiLo.ratio * 80).toFixed(0);
                    const isTop = rd.name === topHiLo.name;
                    r += '<div style="display:grid;grid-template-columns:90px 1fr 100px;align-items:center;gap:10px;margin:4px 0;">';
                    r += '<div style="font-size:11px;' + (isTop ? 'font-weight:600;' : '') + '">' + rd.name + '</div>';
                    r += '<div style="position:relative;height:22px;background:var(--surface);border-radius:3px;overflow:hidden;">';
                    r += '<div style="position:absolute;left:0;top:0;height:100%;width:' + barW + '%;background:' + (isTop ? 'rgba(52,211,153,0.3)' : 'rgba(96,165,250,0.2)') + ';border-radius:3px;"></div>';
                    r += '<div style="position:relative;padding:3px 8px;font-family:var(--mono);font-size:11px;">' + rd.ratio.toFixed(1) + '√ó</div>';
                    r += '</div>';
                    r += '<div style="font-size:10px;color:var(--text-muted);text-align:right;">promo: ' + rd.promo.toFixed(2) + ' / base: ' + rd.base.toFixed(2) + '</div>';
                    r += '</div>';
                }
                r += '</div>';
                r += 'At ' + topHiLo.name + ', each promotional dollar works ' + n(topHiLo.ratio.toFixed(1) + '√ó') + ' harder than a permanent price reduction. ';
                r += 'This makes ' + topHiLo.name + ' the strongest candidate for a High-Low pricing strategy (regular price + periodic deep discounts). ';
                r += runnerUp.name + ' is next at ' + n(runnerUp.ratio.toFixed(1) + '√ó') + '.';
                return r;
            })()
        }
    ];

    // ‚îÄ‚îÄ Render to DOM ‚îÄ‚îÄ
    const tbody = document.getElementById('findings-body');
    findings.forEach((f, idx) => {
        // Finding row
        const tr = document.createElement('tr');
        tr.className = 'finding-row';
        tr.innerHTML =
            '<td style="font-family:var(--sans);font-weight:600;color:' + f.color + ';"><span class="finding-toggle">‚ñ∂</span>' + f.num + '</td>' +
            '<td class="td-label">' + f.title + '</td>' +
            '<td>' + f.applies + '</td>' +
            '<td>' + pillH(f.confidence) + '</td>';

        // Rationale row
        const trR = document.createElement('tr');
        trR.className = 'finding-rationale';
        trR.innerHTML = '<td colspan="4">' + f.rationale + '</td>';

        // Toggle
        tr.addEventListener('click', () => {
            tr.classList.toggle('open');
            trR.classList.toggle('open');
        });

        tbody.appendChild(tr);
        tbody.appendChild(trR);
    });
})();
</script>

</body>
</html>
